webpackJsonp([5],{"++3a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),s=i.n(a),n=i("//Fk"),r=i.n(n),l=i("exGp"),o=i.n(l),c=i("XLwt"),d=i("mtWM"),u=i.n(d),p={data:function(){return{stepflag:0,loading:!1,addpictureloading:!1,dialogVisible1:!1,dialogVisible2:!1,dialogVisible3:!1,CurrentSelectedPicture:null,currentDate:new Date,tamperedPictureischoose:[],tamperedPictureurls:[],tamperedPictureIndex:null,srcList:[[i("1Bnj")],[i("1Bnj")]],options:[{value:"待认证恢复图片",label:"待认证恢复图片"}],value:"待认证恢复图片",myChart:null,option:{title:{text:"检测结果"},tooltip:{},legend:{data:["所占图像百分比"]},xAxis:{data:["未篡改","已篡改"]},yAxis:{},series:[{name:"所占图像百分比",type:"bar",data:[55,45]}]}}},watch:{option:{handler:function(t){t&&this.myChart.setOption(t)},deep:!0}},mounted:function(){},created:function(){this.InitDate()},methods:{uploadSectionFile:function(t){var e=this;return o()(s.a.mark(function i(){var a,n,l;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e.addpictureloading=!0,console.log(t),a=t.file,n=new FormData,console.log(a),n.append("file",a),l=e,new r.a(function(e,i){var s=new FileReader;s.readAsDataURL(a),s.onload=function(i){var s=i.target.result,r=new Image;r.src=s,r.onload=function(i){r.width!=r.height?(l.$message({message:"非n*n的图片不允许上传!!",type:"error"}),e(!1)):(l.$axios.post("http://localhost:5000/addpicture/"+l.value,n).then(function(e){t.onSuccess(e),console.log(e),l.$message({message:"上传成功!!",type:"success"}),l.dialogVisible3=!1,l.addpictureloading=!1,l.tamperedPictureIndex=a.name,l.srcList[0][0]=l.getpath(a.name,"tampered/")}).catch(function(e){var i=e.err;t.onError(i),l.$message({message:"上传失败!!",type:"success"}),l.dialogVisible3=!1,l.addpictureloading=!1}),e(!0))}}}).then(function(t){return t});case 8:case"end":return i.stop()}},i,e)}))()},open:function(){var t=this;setTimeout(function(){t.drawBar()},0)},drawBar:function(){this.myChart=c.init(document.getElementById("myChart")),this.myChart.setOption(this.option),window.addEventListener("resize",this.myChart.resize)},getpath:function(t,e){return t?i("8kxK")("./"+e+t):""},InitDate:function(){var t=this,e=0;i("qX3k").keys().forEach(function(i){var a=i.split("./")[1];t.tamperedPictureurls[e]=a,e++});for(var a=0;a<=this.tamperedPictureurls.length;a++)this.tamperedPictureischoose[a]=!1},SelecttamperedPicture:function(t){this.stepflag=1,null!=this.CurrentSelectedPicture&&(this.tamperedPictureischoose[this.CurrentSelectedPicture]=!1),this.tamperedPictureischoose[t]=!0,this.CurrentSelectedPicture=t,this.tamperedPictureIndex=this.tamperedPictureurls[t-1],this.srcList[0][0]=this.getpath(this.tamperedPictureIndex,"tampered/"),this.dialogVisible1=!1,this.dialogVisible1=!0},handleCancel:function(){this.dialogVisible1=!1,this.dialogVisible2=!1,this.dialogVisible3=!1,this.InitDate()},handleConfirm:function(){this.dialogVisible1=!1,this.dialogVisible2=!1,this.dialogVisible3=!1,this.InitDate()},Preserve:function(){this.$message({message:"保存成功!!",type:"success"})},AreaDetection:function(){var t=this;if(null!=this.tamperedPictureIndex){this.loading=!0,this.InitDate();var e={path:"D:/2023-2-6/image/tampered/"+this.tamperedPictureIndex};u.a.post("http://localhost:5000/AreaDetection",e).then(function(e){t.stepflag=2,t.$message({message:"检测成功!!",type:"success"}),t.dialogVisible2=!0,t.srcList[1][0]=t.getpath(t.tamperedPictureIndex,"checked/"),t.loading=!1}).catch(function(e){console.log(e),t.$message({message:"检测失败!!",type:"error"}),t.loading=!1})}else this.$message({message:"请选择待检测图片!!",type:"error"})}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"AreaDetection",attrs:{"element-loading-text":"正在处理中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("el-row",[i("el-col",{attrs:{span:7}},[i("el-card",{staticClass:"leftel-card",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[i("el-image",{ref:"preview",staticClass:"image",attrs:{src:t.srcList[0][0],"preview-src-list":t.srcList[0]}}),t._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",{staticStyle:{"font-size":"30px","font-weight":"700"}},[t._v("待检测图片")]),t._v(" "),i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(e){t.AreaDetection()}}},[t._v("区域检测")]),t._v(" "),i("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(e){t.dialogVisible3=!0}}},[t._v("上传图片")])],1)])],1)],1),t._v(" "),i("el-col",{attrs:{span:3}},[i("div",{staticStyle:{height:"300px","margin-top":"65px","margin-left":"25%"}},[i("el-steps",{attrs:{direction:"vertical",active:t.stepflag,"finish-status":"success"}},[i("el-step",{attrs:{title:"上传图片"}}),t._v(" "),i("el-step",{attrs:{title:"区域检测"}})],1),t._v(" "),i("i",{staticClass:"el-icon-right"})],1)]),t._v(" "),i("el-col",{attrs:{span:7}},[i("el-card",{staticClass:"rightel-card",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[i("el-image",{ref:"preview",staticClass:"image",attrs:{src:t.srcList[1][0],"preview-src-list":t.srcList[1]}}),t._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",{staticStyle:{"font-size":"30px","font-weight":"700"}},[t._v("篡改区域图")]),t._v(" "),i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(e){t.Preserve()}}},[t._v("保存")])],1)])],1)],1),t._v(" "),i("el-col",{attrs:{span:7}},[i("el-card",{staticClass:"rightel-card",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[i("el-image",{ref:"preview",staticClass:"image",attrs:{src:t.srcList[1][0],"preview-src-list":t.srcList[1]}}),t._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",{staticStyle:{"font-size":"30px","font-weight":"700"}},[t._v("原图篡改区域图")]),t._v(" "),i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(e){t.Preserve()}}},[t._v("保存")])],1)])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"请选择待检测图片",visible:t.dialogVisible1,width:"80%"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[i("div",{staticClass:"demo-image"},t._l(Math.ceil(t.tamperedPictureurls.length/6),function(e){return i("div",{key:e,staticClass:"block"},[i("el-row",t._l(6,function(a){return 6*(e-1)+a<=t.tamperedPictureurls.length?i("el-col",{key:a,attrs:{span:4}},[i("el-card",{class:[t.tamperedPictureischoose[6*(e-1)+a]?"selectedcard":"card"],attrs:{shadow:"hover"}},[i("img",{staticClass:"image",attrs:{src:t.getpath(t.tamperedPictureurls[6*(e-1)+a-1],"tampered/")},on:{click:function(i){t.SelecttamperedPicture(6*(e-1)+a)}}})])],1):t._e()}),1)],1)}),0),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{round:""},on:{click:function(e){t.handleCancel()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.handleConfirm()}}},[t._v("确认")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"结果分析",visible:t.dialogVisible2,width:"80%"},on:{"update:visible":function(e){t.dialogVisible2=e},open:function(e){t.open()}}},[i("div",[i("div",{staticStyle:{width:"100%",height:"430px","margin-top":"40px"},attrs:{id:"myChart"}})]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{round:""},on:{click:function(e){t.handleCancel()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.handleConfirm()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"添加图片",visible:t.dialogVisible3,width:"80%"},on:{"update:visible":function(e){t.dialogVisible3=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.addpictureloading,expression:"addpictureloading"}],staticClass:"addpicture",attrs:{"element-loading-text":"正在上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","http-request":t.uploadSectionFile,multiple:""}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("el-select",{attrs:{placeholder:"请选择上传图片类型"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),i("span",{staticStyle:{"font-size":"18px","font-weight":"400"}},[t._v("非n*n的图片不允许上传!!")])],1)])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{round:""},on:{click:function(e){t.handleCancel()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.handleConfirm()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var h=i("VU/8")(p,g,!1,function(t){i("TcXM")},"data-v-282b0f5b",null);e.default=h.exports},TcXM:function(t,e){},qX3k:function(t,e,i){var a={"./e66e715bc4f5e3aa801fc65f2899d50c.jpeg":"ksad","./lena.png":"YgXg","./user.jpg":"0kkv"};function s(t){return i(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(a)},s.resolve=n,t.exports=s,s.id="qX3k"}});